pipeline {
  agent any
  environment {
    PATH = "$PATH:/opt/apache-maven-3.8.2/bin"
  }
  
stages{
stage('Initialize') {
      steps {
        sh '''
            echo "PATH = ${PATH}"
                 echo "M2_HOME = ${M2_HOME}"
        ''' 
      }
  }
  stages {
    stage('SonarQube Analysis'){
    steps {
    def mvnHome =tool name: 'maven-3.8.2', type 'maven'
      WithSonarQubeEnv('sq1'){
         sh "${mvnHome}/bin/mvn sonar:sonar"
      }  
    }
  }
}
}
}
